<!DOCTYPE html>
<html>
<head>
  <title>Number Engine</title>

  <style>
    :root {
      --bg: #111827;
      --sidebar: #1f2937;
      --text: #ffffff;
      --button: #3b82f6;
      --accent: #10b981;
    }

    body.light {
      --bg: #f3f4f6;
      --sidebar: #ffffff;
      --text: #111827;
      --button: #2563eb;
      --accent: #059669;
    }

    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: var(--bg);
      color: var(--text);
      display: flex;
      transition: 0.3s;
    }

    #sidebar {
      width: 250px;
      background: var(--sidebar);
      padding: 20px;
      transition: 0.3s;
      display: flex;
      flex-direction: column;
    }

    #sidebar.hidden {
      width: 0;
      padding: 0;
      overflow: hidden;
    }

    .menu-button {
      background: none;
      border: none;
      color: var(--text);
      padding: 10px;
      text-align: left;
      cursor: pointer;
      border-radius: 6px;
      margin-bottom: 5px;
    }

    .menu-button.active {
      background: var(--button);
      color: white;
    }

    #main {
      flex: 1;
      padding: 30px;
      position: relative;
    }

    #toggleSidebar {
      position: absolute;
      top: 20px;
      right: 20px;
      cursor: pointer;
      font-size: 18px;
      background: var(--button);
      border: none;
      color: white;
      padding: 6px 10px;
      border-radius: 6px;
    }

    input {
      width: 80%;
      max-width: 600px;
      padding: 10px;
      font-size: 18px;
      border-radius: 6px;
      border: none;
      margin-top: 20px;
    }

    button.action {
      margin-top: 15px;
      padding: 10px 18px;
      border-radius: 6px;
      border: none;
      background: var(--accent);
      color: white;
      cursor: pointer;
    }

    #result {
      margin-top: 20px;
      font-size: 18px;
      line-height: 1.6;
      word-wrap: break-word;
    }

    #historyList {
      margin-top: 20px;
      font-size: 14px;
      max-height: 400px;
      overflow-y: auto;
    }
  </style>
</head>

<body>

<div id="sidebar">
  <h2>Tools</h2>

  <button class="menu-button active" onclick="showTool('calculator')">
    Calculator
  </button>

  <button class="menu-button" onclick="showTool('history')">
    History
  </button>

  <hr>

  <button class="menu-button" onclick="toggleTheme()">
    Toggle Theme
  </button>
</div>

<div id="main">

  <button id="toggleSidebar" onclick="toggleSidebar()">☰</button>

  <div id="calculatorTool">
    <h1>Number Name Calculator</h1>

    <input id="numberInput" placeholder="Enter a large number..." />

    <br><br>

    <button class="action" onclick="setScale('short')" id="shortBtn">
      Short Scale
    </button>

    <button class="action" onclick="setScale('long')" id="longBtn">
      Long Scale
    </button>

    <br>
    <button class="action" onclick="calculate()">Calculate</button>

    <div id="result"></div>
  </div>

  <div id="historyTool" style="display:none;">
    <h1>History</h1>
    <div id="historyList"></div>
  </div>

</div>

<script>

// ==========================
// THEME
// ==========================

(function() {
  const savedTheme = localStorage.getItem("theme");
  if (savedTheme === "light") {
    document.body.classList.add("light");
  }
})();

function toggleTheme() {
  document.body.classList.toggle("light");
  const isLight = document.body.classList.contains("light");
  localStorage.setItem("theme", isLight ? "light" : "dark");
}

// ==========================
// SIDEBAR
// ==========================

function toggleSidebar() {
  document.getElementById("sidebar").classList.toggle("hidden");
}

function showTool(tool) {

  document.getElementById("calculatorTool").style.display = "none";
  document.getElementById("historyTool").style.display = "none";

  document.querySelectorAll(".menu-button").forEach(btn =>
    btn.classList.remove("active")
  );

  if (tool === "calculator") {
    document.getElementById("calculatorTool").style.display = "block";
    document.querySelectorAll(".menu-button")[0].classList.add("active");
  }

  if (tool === "history") {
    document.getElementById("historyTool").style.display = "block";
    document.querySelectorAll(".menu-button")[1].classList.add("active");
    loadHistory();
  }
}

// ==========================
// SCALE SYSTEM
// ==========================

let currentScale = "short";

function setScale(scale) {
  currentScale = scale;

  document.getElementById("shortBtn").style.opacity =
    scale === "short" ? "1" : "0.6";

  document.getElementById("longBtn").style.opacity =
    scale === "long" ? "1" : "0.6";
}

// Known scales

const shortScale = [
  "", "thousand", "million", "billion",
  "trillion", "quadrillion", "quintillion",
  "sextillion", "septillion", "octillion",
  "nonillion", "decillion"
];

const longScale = [
  "", "thousand", "million", "milliard",
  "billion", "billiard", "trillion",
  "trilliard", "quadrillion"
];

// Infinite naming generator

function getName(index) {

  const base = currentScale === "short" ? shortScale : longScale;

  if (index < base.length) {
    return base[index];
  }

  const extraIndex = index - base.length;

  const unitPrefixes = [
    "", "un", "duo", "tri", "quad",
    "quin", "sex", "sept", "oct", "non"
  ];

  const tierPrefixes = [
    "zoa", "gon", "qaigen", "suno",
    "valen", "teron", "luxen", "phyr", "nexon"
  ];

  const tier = Math.floor(extraIndex / 9);
  const unit = (extraIndex % 9) + 1;

  const unitName = unitPrefixes[unit];
  const tierName = tierPrefixes[tier % tierPrefixes.length];

  return unitName + tierName + "illion";
}

// ==========================
// SCIENTIFIC NOTATION
// ==========================

function toScientific(numStr) {
  const length = numStr.length;
  if (length === 1) return numStr;
  return `${numStr[0]}.${numStr.slice(1,4)} × 10^${length - 1}`;
}

// ==========================
// MAIN CALCULATION
// ==========================

function calculate() {

  let numStr = document.getElementById("numberInput").value;
  numStr = numStr.replace(/,/g, "").trim();

  if (!/^\d+$/.test(numStr)) {
    document.getElementById("result").innerText = "Invalid number.";
    return;
  }

  if (numStr === "0") {
    document.getElementById("result").innerText = "0";
    return;
  }

  const groups = [];
  let temp = numStr;

  while (temp.length > 0) {
    groups.unshift(temp.slice(-3));
    temp = temp.slice(0, -3);
  }

  const highestIndex = groups.length - 1;
  const highestValue = parseInt(groups[0]);
  const decimalPart = groups[1]
    ? "." + groups[1].padStart(3,"0").slice(0,3)
    : "";

  const name = getName(highestIndex);
  const scientific = toScientific(numStr);

  const output =
    `${highestValue}${decimalPart} ${name}<br><br>` +
    `Scientific: ${scientific}`;

  document.getElementById("result").innerHTML = output;

  saveToHistory(numStr, `${highestValue}${decimalPart} ${name}`);
}

// ==========================
// HISTORY STORAGE
// ==========================

function saveToHistory(input, result) {

  let history = JSON.parse(localStorage.getItem("calcHistory")) || [];
  history.unshift({ input, result });

  localStorage.setItem("calcHistory", JSON.stringify(history));
}

function loadHistory() {

  let history = JSON.parse(localStorage.getItem("calcHistory")) || [];
  const historyDiv = document.getElementById("historyList");
  historyDiv.innerHTML = "";

  history.forEach(item => {
    const entry = document.createElement("div");
    entry.innerText = `${item.input} → ${item.result}`;
    historyDiv.appendChild(entry);
  });
}

</script>

</body>
</html>
